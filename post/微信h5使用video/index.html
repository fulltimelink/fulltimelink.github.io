<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>微信H5使用video | 旧事重提</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.101.0" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="fulltimelink">
<meta name="keywords" content="h5">
<link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/all.css" />




<meta property="og:title" content="微信H5使用video" />
<meta property="og:description" content="日常摸鱼工作时，收到反馈，有个活动视频在微信内有声音但是画面卡住不动
暂停再播又会恢复正常
经过编写简单demo测试分析，环境如下 ：
安卓木有问题，只有IOS下才会出现 video标签使用了poster属性设置封面图 IOS下非微信浏览器正常播放 检测了视频，标准H264 mpeg-part 10 所以应该和视频没多大关系~
这可能又触发了微信的某个BUG, 先搜索一下吧：
社区有人反馈，说是加上 custom-cache=&ldquo;false&rdquo; , 经测试无效 这个好像是微信小程序video组件的
然后又分析了下video的使用方式是否有啥特殊的
&lt;video poster=&#34;&#34;&gt; &lt;source src=&#34;****.mp4&#34;&gt;&lt;/source&gt; &lt;/video&gt; 将source 去掉 src 移入到video标签中 IOS下测试正常&hellip;
赶紧看下 mdn 并没有发现video 对source有啥特殊的限制
追不出来啥了&hellip;
结论：微信&#43;IOS环境下&#43;poster的情况下，H5中video标签不可使用source指定src!!!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fulltimelink.github.io/post/%E5%BE%AE%E4%BF%A1h5%E4%BD%BF%E7%94%A8video/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-19T10:00:28+08:00" />
<meta property="article:modified_time" content="2022-04-19T10:00:28+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="微信H5使用video"/>
<meta name="twitter:description" content="日常摸鱼工作时，收到反馈，有个活动视频在微信内有声音但是画面卡住不动
暂停再播又会恢复正常
经过编写简单demo测试分析，环境如下 ：
安卓木有问题，只有IOS下才会出现 video标签使用了poster属性设置封面图 IOS下非微信浏览器正常播放 检测了视频，标准H264 mpeg-part 10 所以应该和视频没多大关系~
这可能又触发了微信的某个BUG, 先搜索一下吧：
社区有人反馈，说是加上 custom-cache=&ldquo;false&rdquo; , 经测试无效 这个好像是微信小程序video组件的
然后又分析了下video的使用方式是否有啥特殊的
&lt;video poster=&#34;&#34;&gt; &lt;source src=&#34;****.mp4&#34;&gt;&lt;/source&gt; &lt;/video&gt; 将source 去掉 src 移入到video标签中 IOS下测试正常&hellip;
赶紧看下 mdn 并没有发现video 对source有啥特殊的限制
追不出来啥了&hellip;
结论：微信&#43;IOS环境下&#43;poster的情况下，H5中video标签不可使用source指定src!!!"/>

<meta itemprop="name" content="微信H5使用video">
<meta itemprop="description" content="日常摸鱼工作时，收到反馈，有个活动视频在微信内有声音但是画面卡住不动
暂停再播又会恢复正常
经过编写简单demo测试分析，环境如下 ：
安卓木有问题，只有IOS下才会出现 video标签使用了poster属性设置封面图 IOS下非微信浏览器正常播放 检测了视频，标准H264 mpeg-part 10 所以应该和视频没多大关系~
这可能又触发了微信的某个BUG, 先搜索一下吧：
社区有人反馈，说是加上 custom-cache=&ldquo;false&rdquo; , 经测试无效 这个好像是微信小程序video组件的
然后又分析了下video的使用方式是否有啥特殊的
&lt;video poster=&#34;&#34;&gt; &lt;source src=&#34;****.mp4&#34;&gt;&lt;/source&gt; &lt;/video&gt; 将source 去掉 src 移入到video标签中 IOS下测试正常&hellip;
赶紧看下 mdn 并没有发现video 对source有啥特殊的限制
追不出来啥了&hellip;
结论：微信&#43;IOS环境下&#43;poster的情况下，H5中video标签不可使用source指定src!!!"><meta itemprop="datePublished" content="2022-04-19T10:00:28+08:00" />
<meta itemprop="dateModified" content="2022-04-19T10:00:28+08:00" />
<meta itemprop="wordCount" content="35">
<meta itemprop="keywords" content="h5," />
</head>
<body>
<header>
<div id="titletext">
<h2 id="titleonly"><a href="https://fulltimelink.github.io/">旧事重提</a></h2>
</div>
<div id="title-social">
</div>
<div id="mainmenu">
<nav>
<ul>
<li><a href="/tags/algorithm">Algorithm</a></li>
<li><a href="/tags/go">Go</a></li>
<li><a href="/tags/h5">H5</a></li>
<li><a href="/tags/java">Java</a></li>
<li><a href="/tags/javascript">Javascript</a></li>
<li><a href="/tags/kubernetes">Kubernetes</a></li>
<li><a href="/tags/linux">Linux</a></li>
<li><a href="/tags/php">Php</a></li>
</ul>
</nav>
</div>
</header>
<main>
<div class="post">
<article>
<div class="post-header">
<div class="meta">
<div class="date">
<span class="day">19</span>
<span class="rest">Apr 2022</span>
</div>
</div>
<div class="matter">
<h1 class="title">微信H5使用video</h1>
<p class="post-meta">
<span class="post-meta">





<i class="fas fa-user"></i>&nbsp;

fulltimelink



</span>

</p>
</div>
</div>
<div class="markdown">
<p>日常<del>摸鱼</del>工作时，收到反馈，有个活动视频在微信内有声音但是画面卡住不动</p>
<p>暂停再播又会恢复正常</p>
<p>经过编写简单demo测试分析，环境如下 ：</p>
<ul>
<li>安卓木有问题，只有IOS下才会出现</li>
<li>video标签使用了poster属性设置封面图</li>
<li>IOS下非微信浏览器正常播放</li>
</ul>
<p>检测了视频，标准H264 mpeg-part 10  所以应该和视频没多大关系~</p>
<p>这可能又触发了微信的某个BUG, 先搜索一下吧：</p>
<p>社区有人反馈，说是加上 custom-cache=&ldquo;false&rdquo; , 经测试无效 <del>这个好像是微信小程序video组件的</del></p>
<p>然后又分析了下video的使用方式是否有啥特殊的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">video</span> <span style="color:#a6e22e">poster</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">source</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;****.mp4&#34;</span>&gt;&lt;/<span style="color:#f92672">source</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">video</span>&gt;
</span></span></code></pre></div><p>将source 去掉  src 移入到video标签中 IOS下测试正常&hellip;</p>
<p>赶紧看下 mdn  并没有发现video 对source有啥特殊的限制</p>
<p><figure>
  <img src="/20220419/1.jpg" alt="兼容性"  />
</figure></p>
<p>追不出来啥了&hellip;</p>
<p><strong>结论：微信+IOS环境下+poster的情况下，H5中video标签不可使用source指定src!!!</strong></p>
<hr>
<p><figure>
  <img src="/20220419.png" alt="20220419"  />
</figure></p>

</div>
<div class="tags">
<div class="taxosfloating_left">
<p>Tags</p>
</div>
<div class="termsfloating_right">
<p>
<a href="/tags/h5/">h5</a>
</p>
</div>
<div class="clearit"></div>
</div>
</article>
</div>
</main><script src="/js/dark-mode.js"></script>

</body>
</html>
